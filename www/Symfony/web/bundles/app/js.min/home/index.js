$(document).ready(function(){function e(){var e=[],t=[];$("#chart").length&&new Chartist.Line("#chart",{labels:labels,series:series},{fullWidth:!0,chartPadding:{right:20,top:70},low:0,lineSmooth:Chartist.Interpolation.none()},[["screen and (max-width: 1100px)",{axisX:{labelInterpolationFnc:function(e,t){return dateCollection.length<6&&t%Math.ceil(recordsLength/12)===0?e:null}}}],["screen and (min-width: 1100px)",{axisX:{labelInterpolationFnc:function(e,t){return dateCollection.length<7&&t%Math.ceil(recordsLength/18)===0?e:null}}}],["screen and (min-width: 1300px)",{axisX:{labelInterpolationFnc:function(e,t){return dateCollection.length<10&&t%Math.ceil(recordsLength/24)===0?e:null}}}],["screen and (min-width: 1600px)",{axisX:{labelInterpolationFnc:function(e,t){return dateCollection.length<13&&t%Math.ceil(recordsLength/30)===0?e:null}}}],["screen and (min-width: 1900px)",{axisX:{labelInterpolationFnc:function(e,t){return dateCollection.length<5&&t%Math.ceil(recordsLength/36)===0?e:null}}}]]).on("data",function(t){for(var n in t.data.labels){var i=t.data.labels[n];"0:00"==i&&e.push(n)}}).on("draw",function(n){"point"===n.type?(e.indexOf(n.index.toString())>=0&&-1==$.inArray(n.x,t)&&t.push(n.x),recordsLength>144?n.element.addClass("point_size_6"):recordsLength>120?n.element.addClass("point_size_5"):recordsLength>96?n.element.addClass("point_size_4"):recordsLength>72?n.element.addClass("point_size_3"):recordsLength>48?n.element.addClass("point_size_2"):recordsLength>24?n.element.addClass("point_size_1"):n.element.addClass("point_size_0")):"line"===n.type&&(recordsLength>144?n.element.addClass("line_size_6"):recordsLength>120?n.element.addClass("line_size_5"):recordsLength>96?n.element.addClass("line_size_4"):recordsLength>72?n.element.addClass("line_size_3"):recordsLength>48?n.element.addClass("line_size_2"):recordsLength>24?n.element.addClass("line_size_1"):n.element.addClass("line_size_0"))}).on("created",function(e){for(var n in t)e.svg.elem("line",{x1:t[n],x2:t[n],y1:465,y2:70},"vertical-line"),e.svg.elem("text",{x:t[n]-30,y:50,transform:"rotate(-45, "+t[n]+", 15)"},"ct-label").text(dateCollection[n]);t=[]})}e();var t=new Date,n="08-11-2015",i=t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear();$("#date_1").datepicker({onSelect:function(e){$("#last_24_hours").prop("checked",!1),$("#date_2").datepicker("option","minDate",e)},dateFormat:"dd-mm-yy"}).datepicker("option","maxDate",$("#date_2").val()?$("#date_2").val():i).datepicker("option","minDate",n),$("#date_2").datepicker({onSelect:function(e){$("#last_24_hours").prop("checked",!1),$("#date_1").datepicker("option","maxDate",e)},dateFormat:"dd-mm-yy"}).datepicker("option","minDate",$("#date_1").val()?$("#date_1").val():n).datepicker("option","maxDate",i),$("#filter_form input, #filter_form select").keydown(function(e){13===e.keyCode&&(e.preventDefault(),$("#submit_filter_button").trigger("click"))}),$(".datepicker").change(function(){$(this).val()||("date_1"==$(this).attr("id")?$("#date_2").datepicker("option","minDate",n):$("#date_1").datepicker("option","maxDate",i))}),$("#reset_filter").click(function(e){e.preventDefault(),$("#last_24_hours, #item_fieldset input").prop("checked",!0),$(".datepicker").val(""),$('#station option[value="25"]').prop("selected",!0),$("#station").trigger("chosen:updated"),$("#date_2").datepicker("option","minDate",n),$("#date_1").datepicker("option","maxDate",i)}),$("#last_24_hours").change(function(){$(".datepicker").val(""),$("#date_2").datepicker("option","minDate",n),$("#date_1").datepicker("option","maxDate",i)}),$("#submit_filter_button").click(function(t){t.preventDefault(),Loading.start($(this));var n=[];$("#item_fieldset input:checked").each(function(){n.push($(this).val())}),$.ajax({url:$("#filter_form").attr("action"),data:$("#filter_form").serializeObject()}).done(function(t){history.pushState(title,"",this.url),$("#records_wrapper").hide().html(t).fadeIn(),e(),document.title=title,Loading.stop($("#submit_filter_button")),$(window).width()<=1200&&$("#display_sidebar_button").trigger("click")})}),$("#print_button").click(function(e){e.preventDefault(),Loading.start($(this)),$.post(window.location.href).done(function(e){Loading.stop($("#print_button")),window.location.href=e.url})})});